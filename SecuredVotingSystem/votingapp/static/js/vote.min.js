$(document).ready(function() {
  $('.voting-button').click(function() {
    var clickedButton = $(this);
    $('.voting-button').not(clickedButton).each(function() {
      var voteOption = $(this).closest('.vote-option');
      voteOption.addClass('thanos-snap');
      voteOption.fadeOut(1500, function() {
        $(this).remove();
      });
    });

    clickedButton.text('Voted For');
    clickedButton.addClass('voted');

  });
  $('.vb2').click(function() {
    var clickedButton = $(this);
    $('.vb2').not(clickedButton).each(function() {
      var voteOption = $(this).closest('.v2');
      voteOption.addClass('thanos-snap');
      voteOption.fadeOut(1500, function() {
        $(this).remove();
      });
    });

    clickedButton.text('Voted For');
    clickedButton.addClass('voted');
  });

  $(document).ready(function() {
  $("#submit-button").on("click", function(e) {
    e.preventDefault();

    // Retrieve selected candidates
    var selectedCandidates = [];
    $(".voted").each(function() {
      selectedCandidates.push($(this).text());
    });

    // Create the AJAX request data
    var requestData = {
      selectedCandidates: selectedCandidates
    };

    // Send the AJAX request
    $.ajax({
      url: "{% url 'process_vote' %}",
      type: "POST",
      dataType: "json",
      data: JSON.stringify(requestData),
      headers: { "X-CSRFToken": "{{ csrf_token }}" },
      success: function(response) {
        // Handle success response
        console.log(response);
      },
      error: function(xhr, textStatus, error) {
        // Handle error response
        console.log(xhr.responseText);
      }
    });
  });
});

});